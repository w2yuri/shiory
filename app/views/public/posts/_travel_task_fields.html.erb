<div class="nested-fields">
  <div class="form-group">
    <div class="custom-file">
      <%= f.file_field :task_image, class: 'custom-file-input', onchange: 'fileOnChange(this)' %>
      <%= f.label :task_image, 'Picture', class: 'custom-file-label' %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :title, 'Title' %>
    <%= f.text_field :title, class: 'form-control' %>
  </div>
  <div class="form-group">
    <%= f.label :contents, 'Shiory' %>
    <%= f.text_area :contents, class: 'form-control' %>
  </div>
  <div class="form-group">
    <%= link_to_remove_association 'Delete', f, class: 'js-log-remove-btn' %>
  </div>
</div>

<script>
  function fileOnChange(element) {
      var fileName = $(element).val().split('\\');
      $(element).next('.custom-file-label').html(fileName.pop());
  };
</script>